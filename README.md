
# Ark Cookbook

---

[toc]

<div style="page-break-after: always;"></div>

## Ark 介绍

Ark 是一套帮助开发者快速生成代码的工具集，按种类区分，可分为效率相关、体验相关、质量相关的三类工具，细分如下：

- 效率相关
  - Ajax 接口代码小语言 —— mid
  - 表单代码小语言 —— fee
  - 表格代码小语言 —— taw
  - 数据收集框架 —— mikasa
- 体验相关
  - 文档生成工具 —— lop
  - VSCode 配置生成工具 —— config
  - 代码地图 —— codemap
  - 配置文件管理工具（待开发）
- 质量相关
  - 测试框架（开发中）
  - UI 集成测试语言 —— levi

### 安装 Ark

```bash
$ pnpm install arks --global 
# or
$ yarn global add arks
# or
$ npm install -g arks
```

安装成功后即可在全局使用`ark`命令，如：

```bash
$ ark --help
```

### 使用须知

Ark中的各个小语言，在设计时，首先考虑的是常见的业务需求，在此基础上尽可能覆盖更多场景，但并不能保证无所不包，因而随着业务复杂度增加，遇到小语言无法满足的场景是在所难免的。

在这种情形下，可以借助小语言解决大部分场景需求，对于力不能及的部分，只能由人类手动填补，然而请务必将小语言的文件删除，以免因某次误用而覆盖了人类写的代码。

<div style="page-break-after: always;"></div>

## 效率向

---

<div style="page-break-after: always;"></div>

## 体验向

---

### 文档生成工具 —— Lop

#### 如何使用

```bash
$ ark doc ./xxx.js README
# xxx.js会作为解析的入口文件，README是生成后的文档名称，不需要加后缀。

$ ark doc -a
# 直接输出本文档——《Ark Cookbook》
```
#### 语法规则

##### 解析语法

解析器的解析范围标识如下：

```
/*!! 开头
  ...
  @=./xx.md
  @~./xxx.js
!!*/ 结束
```

在解析范围中间，主要支持两种语法，分别是抓取和引用，以下分别介绍：

##### 抓取语法

$$
@ \quad = \quad (url)
$$

`url`目前仅支持相对路径，该语法会将路径下的整个文件抓取过来，填充到文档中，适合用于抓取某测试用例作为文档中的demo展示。

##### 引用语法

$$
@ \quad \sim \quad (url)
$$

`url`目前仅支持相对路径，该语法会解析某个文件，如果文件中有解析范围，其中又包含引用或抓取语法，则自然会递归解析。这份Ark文档本身就是用该工具不断递归解析各个小文档和文件而生成的。

当在解析过程中遇到`Latex`语法包裹的语句 `$$ ... $$`，则会自动将其中的部分符号转换为Latex语法符号。

<div style="page-break-after: always;"></div>

### VSCode 配置生成工具

该工具用于生成 VSCode 平台下的代码风格配置以及插件配置，主要针对前端技术栈。

#### 如何使用

```bash
$ ark config
```

该命令会在执行目录下生成.vscode 文件，包含代码风格和必要插件的配置，如果当前目录下已经存在.vscode 文件夹，该工具会发出警告，如果确认需要覆盖，可以添加`-o`参数执行。

## 质量向

---

### UI 测试小语言

该小语言用户描述UI布局和用户行为，使用 playwright + jest 进行测试用例的构建和测试。可以生成测试报告。

#### 如何使用

